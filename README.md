# fd-rdd: RDD-based Elastic File Indexer

> **"Everything" for Linux**, powered by Spark-core ideas in Rust.

`fd-rdd` æ˜¯ä¸€ä¸ªé«˜æ€§èƒ½ã€äº‹ä»¶é©±åŠ¨çš„ Linux æ–‡ä»¶ç´¢å¼•æœåŠ¡ã€‚å®ƒå€Ÿé‰´äº† Apache Spark çš„ RDD (Resilient Distributed Datasets) æ€æƒ³ï¼Œé€šè¿‡ä¸‰çº§ç´¢å¼•æ¶æ„å®ç°äº†æ¯«ç§’çº§çš„æœç´¢å“åº”å’Œæä½çš„å†…å­˜å ç”¨ã€‚

## ğŸš€ æ ¸å¿ƒç‰¹æ€§

- **ä¸‰çº§ç´¢å¼•æ¼æ–—**ï¼š
  - **L1 (Hot)**: åŸºäº `DashMap` çš„å†…å­˜çƒ­ç¼“å­˜ï¼Œå“åº”æ—¶é—´ < 1msã€‚
  - **L2 (Warm)**: åˆ†åŒº RDD ç´¢å¼•ï¼Œæ”¯æŒå¹¶è¡Œè¿‡æ»¤ï¼Œå“åº”æ—¶é—´ < 10msã€‚
  - **L3 (Cold)**: åŸºäº `ignore` åº“ï¼ˆfd æ ¸å¿ƒï¼‰çš„å¼¹æ€§æ‰«æï¼Œç¡®ä¿ç»“æœ 100% è¦†ç›–ã€‚
- **å®æ—¶äº‹ä»¶é©±åŠ¨**ï¼šé›†æˆ `notify` åº“ï¼Œæ¯«ç§’çº§æ„ŸçŸ¥æ–‡ä»¶åˆ›å»ºã€åˆ é™¤ã€é‡å‘½åäº‹ä»¶ï¼Œç´¢å¼•è‡ªåŠ¨åŒæ­¥ã€‚
- **è‡ªé€‚åº”æ‰§è¡Œ (AQE)**ï¼šæ ¹æ®ç³»ç»Ÿ CPU è´Ÿè½½å’Œå†…å­˜å‹åŠ›åŠ¨æ€è°ƒæ•´å¹¶è¡Œæ‰«æå¼ºåº¦ï¼Œä¸å½±å“ç³»ç»Ÿæ­£å¸¸å·¥ä½œã€‚
- **VCP å‹å¥½**ï¼šå†…ç½® Axum HTTP æœåŠ¡ï¼Œæä¾›æ ‡å‡† JSON æ¥å£ï¼Œå®Œç¾é€‚é… VCP æ’ä»¶è°ƒç”¨ã€‚
- **é›¶ä¾èµ–åˆ†å‘**ï¼šæ”¯æŒ Musl é™æ€ç¼–è¯‘ï¼Œå•ä¸ªäºŒè¿›åˆ¶æ–‡ä»¶å³å¯è¿è¡Œã€‚

## ğŸ› ï¸ å¿«é€Ÿå¼€å§‹

### 1. ç¼–è¯‘ä¸è¿è¡Œ
```bash
# ç¼–è¯‘ release ç‰ˆæœ¬
cargo build --release

# å¯åŠ¨æœåŠ¡ (é»˜è®¤ç›‘å¬ 127.0.0.1:8080)
./target/release/fd-rdd
```

### 2. æœç´¢æ¥å£
```bash
# ä½¿ç”¨ curl æœç´¢
curl "http://127.0.0.1:8080/search?q=main.rs&limit=10"
```

### 3. äº¤äº’å¼æŸ¥è¯¢
æˆ‘ä»¬æä¾›äº†ä¸€ä¸ªåŸºäº `fzf` çš„äº¤äº’å¼è„šæœ¬ï¼š
```bash
./scripts/fd-query.sh
```

## ğŸ“‚ é¡¹ç›®ç»“æ„

- `src/core/`: RDD æŠ½è±¡ã€è¡€ç¼˜è¿½è¸ªä¸è‡ªé€‚åº”è°ƒåº¦å™¨ã€‚
- `src/index/`: ä¸‰çº§ç´¢å¼•å¼•æ“å®ç°ã€‚
- `src/event/`: åŸºäº `notify` çš„æ–‡ä»¶ç³»ç»Ÿç›‘å¬å™¨ã€‚
- `src/query/`: Axum HTTP æœåŠ¡ä¸æœç´¢é€»è¾‘ã€‚
- `src/storage/`: Checkpoint æŒä¹…åŒ–æœºåˆ¶ã€‚

## âš™ï¸ é…ç½®

æœåŠ¡é»˜è®¤æ‰«æç”¨æˆ·å®¶ç›®å½•ã€‚å¦‚éœ€è‡ªå®šä¹‰æ‰«æè·¯å¾„ï¼Œè¯·ä¿®æ”¹ `src/main.rs` ä¸­çš„ `roots` é…ç½®ã€‚

## ğŸ“œ è®¸å¯è¯

MIT License